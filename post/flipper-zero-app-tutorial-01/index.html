<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/mastodon-timeline.min.css">
    
    
    <title>instantiator.dev | Building an app for Flipper Zero, part 1: Getting started</title>
    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SHE42ZWKEN"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-SHE42ZWKEN', { 'anonymize_ip': false });
}
</script>

    <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://github.com/instantiator/flipper-zero-experimental-apps/raw/main/resistors/.flipcorg/banner.png" /><meta name="twitter:title" content="Building an app for Flipper Zero, part 1: Getting started"/>
<meta name="twitter:description" content="FlipperZero is a digital signals multi-tool. Here&rsquo;s a short guide to the basics of building an app for it&hellip;"/>

    <meta property="og:title" content="Building an app for Flipper Zero, part 1: Getting started" />
<meta property="og:description" content="FlipperZero is a digital signals multi-tool. Here&rsquo;s a short guide to the basics of building an app for it&hellip;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://instantiator.dev/post/flipper-zero-app-tutorial-01/" /><meta property="og:image" content="https://github.com/instantiator/flipper-zero-experimental-apps/raw/main/resistors/.flipcorg/banner.png" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-05-05T09:00:00+00:00" />
<meta property="article:modified_time" content="2023-05-05T09:00:00+00:00" /><meta property="og:site_name" content="instantiator.dev" />
<meta property="og:see_also" content="https://instantiator.dev/post/flipper-zero-app-tutorial-02/" />




    
    <link rel="stylesheet"
        href="/css/markupHighlight.min.59c08a266e8a6489aab7cb3ace4259db920d0e8893682a44ef8401387af97664.css"
        integrity="sha256-WcCKJm6KZImqt8s6zkJZ25INDoiTaCpE74QBOHr5dmQ="
        crossorigin="anonymous"
        type="text/css">

    </head><body><nav id="nav" class="navbar sticky-top justify-content-start navbar-expand-md frosted-white shadow mb-4">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">instantiator.dev</a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        
        
        <li class="nav-item">
          <a class="nav-link " href="/">
            
             Home
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/post/">
            
             All posts
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/categories/tool/">
            
             Tools
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/categories/tutorial/">
            
             Tutorials
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/categories/article/">
            
             Articles
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/about/">
            
             About
          </a>
        </li>
        
      </ul>
    </div>
  </div>
</nav>
<div class="container-fluid">

<div class="row align-items-start">
    <div class="col col-lg-3 d-none d-lg-block">
      <div class="row mb-2">
    <div class="col-3 col-lg-12 d-flex flex-column align-items-center">
        <img 
            src="/lewis/profile.jpg" alt="profile picture" 
            class="mb-4 mt-4 img-thumbnail" 
            style="border-radius: 50%; max-width: 200px; width: 100%;" />
    </div>
    <div class="col d-flex flex-column align-items-center">
        <h3 class="mb-4"><a href="/">instantiator.dev</a></h3>
        
        <div style="text-align: center;" class="mb-4">
            <p>tech, volunteers, public safety, collective intelligence, articles, tools, code and ideas</p>
        </div>

        <div class="d-flex flex-row justify-content-evenly align-self-stretch mb-4">
            
            <a href="https://mastodon.social/@instantiator" rel="me" aria-label="Mastodon" alt="Mastodon">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 418 512" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"></path></svg> 
                
            </a>
            
            <a href="https://github.com/instantiator" rel="me" aria-label="GitHub" alt="GitHub">
                
                <i data-feather="github" aria-hidden="true"></i>
                
            </a>
            
            <a href="https://www.linkedin.com/in/lewiswestbury" rel="me" aria-label="LinkedIn" alt="LinkedIn">
                
                <i data-feather="linkedin" aria-hidden="true"></i>
                
            </a>
            
            <a href="https://instantiator.dev/index.xml" rel="me" aria-label="RSS" alt="RSS">
                
                <i data-feather="rss" aria-hidden="true"></i>
                
            </a>
            
        </div>

        <div class="d-flex flex-row justify-content-evenly align-self-stretch mb-4">
            <ul>
            
                <li><a href="https://icgames.net" rel="me" aria-label="International Consensus Games">International Consensus Games</a></li>
            
                <li><a href="https://www.escapethereview.co.uk/profile/?user_id=11" rel="me" aria-label="Escape the Review profile">Escape the Review profile</a></li>
            
            </ul>
        </div>

        <div>
            <span class="text-body-secondary fw-lighter">
                &copy; Lewis Westbury  2024 
            </span>
        </div>
    </div>
</div>    



    </div>
    <div class="col-lg" style="overflow-x: hidden;">
        <div id="post-content">
            <h2>Building an app for Flipper Zero, part 1: Getting started</h1>
             
<i data-feather="calendar"></i>
<time datetime="2023-05-05">2023-05-05</time>

<br/>
<i data-feather="tag"></i>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/flipperzero">FlipperZero</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/flipper">flipper</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/app">app</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/plugin">plugin</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/coding">coding</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/c">c</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/clang">clang</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/ufbt">ufbt</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/community">community</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/project">project</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/electronics">electronics</a>


<a class="badge bg-secondary" href="https://instantiator.dev/tags/resistance">resistance</a>



            <p>FlipperZero is a digital signals multi-tool. Here&rsquo;s a short guide to the basics of building an app for it&hellip;</p>
<p>The Flipper Zero is a digital signals multi-tool device, with some fun applications. It has an infrared module, a sub-GHz radio, RFID and NFC capability, iButton, USB, a screen, input controls, and GPIO pins. It&rsquo;s small enough to fit in your hand, and it can communicate with your home appliances, or help you to learn about the signals that fly around our world. It&rsquo;s also extremely customisable.</p>
<h1 id="lets-build-an-app-for-flipper-zero">Let&rsquo;s build an app for Flipper Zero</h1>
<p>Flipper Zero features several apps built directly into the firmware, but you can also create and install external apps onto the SD card which are then available through the Applications menu.</p>
<h2 id="resistance-is-futile">Resistance is futile</h2>
<p>With the help of several folks from the Flipper dev community, I recently built <a href="https://flipc.org/instantiator/flipper-zero-experimental-apps?branch=main&root=resistors">an app to calculate the value of resistors</a> by decoding the coloured bands on them.</p>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/mCpjn93I1Sw" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>

<p>More detail and source code at:</p>
<ul>
<li><a href="https://github.com/instantiator/flipper-zero-experimental-apps">instantiator/flipper-zero-experimental-apps</a></li>
</ul>
<p>Thanks to</p>
<ul>
<li><a href="https://github.com/jamisonderek">Derek Jamison</a> for helping to debug a thorny issue or two, and</li>
<li><a href="https://github.com/Kuronons">Kuronons</a> for the graphics in the app.</li>
</ul>
<p>In this tutorial, we&rsquo;ll walk through the process of setting up an app, and building a simple user interface, using the same techniques.</p>
<h2 id="community">Community</h2>
<p>Before getting started, it&rsquo;s helpful to know that there&rsquo;s a thriving and welcoming FlipperZero community on a public Discord server:</p>
<ul>
<li><a href="https://discord.gg/flipper">Flipper Devices</a></li>
</ul>
<h2 id="with-thanks">With thanks</h2>
<p>This part of the tutorial series would not have been possible without the help and support of various people in the Flipper Zero community. Many thanks to:</p>
<ul>
<li>Derek Jamison for his <a href="https://github.com/jamisonderek/flipper-zero-tutorials">plugin tutorials</a>, and accompanying <a href="https://github.com/jamisonderek/flipper-zero-tutorials/wiki">wiki</a></li>
<li>FlipperZero folks for the <a href="https://github.com/flipperdevices/flipperzero-ufbt">ufbt</a> tool, and</li>
<li><a href="https://github.com/playmean">Aleksey Korolev</a> for the <a href="https://flipc.org/">flipc.org</a> Flipper app catalogue.</li>
</ul>
<h2 id="the-toolchain">The toolchain</h2>
<p>I&rsquo;m using a few tools:</p>
<ul>
<li><a href="https://github.com/flipperdevices/flipperzero-ufbt">ufbt</a> (&ldquo;micro Flipper Build Tool&rdquo;) - a version of <a href="https://github.com/flipperdevices/flipperzero-firmware/blob/dev/documentation/fbt.md">fbt</a> (the Flipper Built Tool) that supports everything you need for app development</li>
<li><a href="https://code.visualstudio.com/">Visual Studio Code</a> - an editor and IDE from Microsoft</li>
<li><a href="https://www.pinta-project.com/">Pinta</a> - a Mac clone of <a href="https://www.getpaint.net/index.html">paint.net</a> (but any graphics tool that allows you to edit 1-bit PNGs will do)</li>
</ul>
<p>The experience working with Visual Studio Code is brilliant. It provides project management features, C syntax awareness and highlighting, and <code>ufbt</code> provides a nice integration to support build and debug options from the IDE.</p>
<h2 id="versions-and-firmwares">Versions and firmwares</h2>
<p>Flipper apps are written in C, and they&rsquo;re compiled against the version of the firmware you want them to run against. This means that if your firmware changes, your app must too.</p>
<p>This create a little complexity for distributing an app - as the firmware versions regularly frequently, and many people are using different flavours of firmware altogether (eg. <a href="https://github.com/DarkFlippers/unleashed-firmware">DarkFlipper/Unleashed</a>, <a href="https://github.com/RogueMaster/flipperzero-firmware-wPlugins">RogueMaster</a>).</p>
<p><em>NB. An exploration of the various firmware features is beyond the scope of this tutorial.</em></p>
<p>There&rsquo;s a nice app distribution site called <a href="https://flipc.org">flipc.org</a> that solves this problem by compiling apps from source code as they&rsquo;re needed. Provided your source code is in a public GitHub repository, you can use <a href="https://flipc.org">flipc.org</a> to publish it.</p>
<h2 id="coming-to-c-from-c-type-languages">Coming to C from C-type languages</h2>
<p>If you&rsquo;re not familiar with C, but you&rsquo;ve worked in C-type languages, you&rsquo;re off to a good start. There are few things to know, though. <em>Feel free to skip this section if you&rsquo;re already a confident C developer.</em></p>
<p><strong>Caveat:</strong> I&rsquo;ve not been working in C for long, but as I&rsquo;ve experienced most of these pitfalls, I wanted to share them with you to help you avoid the same mistakes! Some of these are very difficult to debug - especially memory leaks.</p>
<h3 id="memory-safety">Memory safety</h3>
<p>C isn&rsquo;t managed code, and there&rsquo;s no garbage collection, so you&rsquo;re going to have to take good care of the memory you allocate to data structures (<code>structs</code>) with <code>malloc</code> and <code>free</code> functions. If you allocate some memory, you&rsquo;re going to have to free it - particularly if your code can do the allocation more than once. If you don&rsquo;t release it, this can cause a memory leak - where you eventually run out of assignable memory.</p>
<p>C also won&rsquo;t prevent you from accessing memory you shouldn&rsquo;t (eg. if you <code>malloc</code> the wrong size for your <code>struct</code>, and then try to write to it (or if you write to an incorrect offset to a pointer), you could end up writing to memory reserved for other variables or even code). This sort of issue manifests as weird crashes or unexpected values in variables, often long after the actual buggy code has been executed. That makes it difficult to debug.</p>
<h3 id="namespaces">Namespaces</h3>
<p>C doesn&rsquo;t have objects or enforced namespaces, so as soon as you&rsquo;re writing something reasonably complex I recommend you start naming things carefully, so that it&rsquo;s absolutely clear what&rsquo;s what.</p>
<p>For instance, <code>enums</code> are named in code, but this is a thin veil over integers, and you can use <code>enum</code> values as integers anywhere in the code. I recommend giving <code>enum</code> values distinct names prefixed with the name of the <code>enum</code> type itself, eg.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">enum</span> {
</span></span><span style="display:flex;"><span>    TagEventTypeInput,
</span></span><span style="display:flex;"><span>    TagEventTypeSubGhzDataDetected,
</span></span><span style="display:flex;"><span>    TagEventTypeInfraredMessage,
</span></span><span style="display:flex;"><span>} TagEventType;
</span></span></code></pre></div><p><code>CapitalisationOfWords</code> or <code>using_underscore_delimiters</code> are both acceptable ways to clarify namespaces and meanings in my book. I&rsquo;m sure there&rsquo;s an established convention. My advice is to be consistent in whatever you do.</p>
<h3 id="static-and-const"><code>static</code> and <code>const</code></h3>
<p>It&rsquo;s worth understanding what keywords like <code>static</code> and <code>const</code> mean in C - they won&rsquo;t be perfectly aligned to how you&rsquo;ve been using them in (say) Java, C++, or C#&hellip;</p>
<ul>
<li><code>static</code> (function) - a <code>static</code> function is only available to other methods in the same <code>.c</code> file</li>
<li><code>static</code> (global variable) - a <code>static</code> global variable is only available to methods in the same <code>.c</code> file</li>
<li><code>static</code> (local variable) - a <code>static</code> variable in a function keeps its value between function calls</li>
</ul>
<p>Hiding functions with <code>static</code> is similar to creating private methods in other languages, and it&rsquo;s considered good practice.</p>
<p>The <code>const</code> keyword distinguishes between pointers and variables, and has a few variants. It&rsquo;s used to indicate that a particular pointer or variable cannot be assigned to after initialisation. Don&rsquo;t worry if this doesn&rsquo;t all go in, it&rsquo;s just worth knowing&hellip;</p>
<ul>
<li><code>int var = 5;</code> an <em>assignable</em> integer</li>
<li><code>int const var = 5;</code> an <em>unassignable</em> integer</li>
<li><code>int* var</code> - an <em>assignable</em> pointer to an <em>assignable</em> integer</li>
<li><code>const int* var</code> - an <em>assignable</em> pointer to an <em>unassignable</em> integer</li>
<li><code>int* const var</code> - an <em>unassignable</em> pointer to an <em>assignable</em> integer</li>
<li><code>const int* const var</code> - an <em>unassignable</em> pointer to an <em>unassignable</em> integer</li>
</ul>
<h3 id="data-structures">Data structures</h3>
<p><code>struct</code> and <code>enum</code> are similar to what you&rsquo;d expect although, as mentioned earlier, <code>enum</code> values are actually integers - and so not as type-safe as you might assume.</p>
<p><code>struct</code> is about as close as you can get to a data class - and you&rsquo;ll see them used all over C to represent rich data structures.</p>
<h3 id="code-headers-and-interfaces">Code, headers and interfaces</h3>
<p><code>.c</code> files contain code. It&rsquo;s <em>possible</em> to write an entire application in a single <code>.c</code> file - and I&rsquo;ve seen several of these. It&rsquo;s a perfectly acceptable approach, but you risk encountering complexity and difficulties as you go.</p>
<p>The C compiler cares about the order that things are defined in. So, for instance, if you want to refer to a function, it needs to have been defined <em>before</em> you first refer to it. If not, you&rsquo;ll see a couple of errors.</p>
<p>For instance, if you refer to a function called <code>do_something</code> before you define it, you&rsquo;ll see something like this where you first call it:</p>
<pre tabindex="0"><code>implicit declaration of function &#39;do_something&#39;
</code></pre><p>and then, where you define it:</p>
<pre tabindex="0"><code>conflicting types for &#39;do_something&#39;
</code></pre><p>This is because when you first referred to function <code>do_something</code>, you &lsquo;implicitly&rsquo; defined it. Then, later, when the compiler encountered your actual definition it doesn&rsquo;t know what to do - it already has an implicit definition.</p>
<p>There are two solutions to this:</p>
<ul>
<li>Place the function definition before its first reference in the <code>.c</code> file</li>
<li>Define the function&rsquo;s <em>footprint</em> in a <code>.h</code> header file, and include that header file at the beginning of your <code>.c</code> file</li>
</ul>
<p>In this simple scenario, it&rsquo;s probably easier just to reorder your functions.</p>
<p>As soon as you want to start defining a group or library of functions and structures that are all linked, you&rsquo;ll want to place them into a separate <code>.c</code> file and then create a header file you can use to define the interface (the methods you&rsquo;re sharing with other <code>.c</code> files).</p>
<p>As a rule of thumb, if you want to include a header file from your own code, use inverted commas:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;my_lib.h&#34;</span><span style="color:#75715e">
</span></span></span></code></pre></div><p>If you want to include a library header (eg. from the firmware), use angle brackets:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;gui/gui.h&gt;</span><span style="color:#75715e">
</span></span></span></code></pre></div><p>The good news is that <code>ufbt</code> is smart. It will find all your <code>.c</code> code files, and compile them in a sensible order. (The days of having to list all your code files for <code>gcc</code> are a long distant nightmare&hellip;)</p>
<h3 id="firmware-headers">Firmware headers</h3>
<p>A lot of this tutorial will use the <a href="https://github.com/flipperdevices/flipperzero-firmware/tree/dev/applications/services/gui">gui libraries</a> made available through the <a href="https://github.com/flipperdevices/flipperzero-firmware">official firmware</a>. If you ever need to figure out how something works, it&rsquo;s definitely worth taking a look.</p>
<p>If you do poke around you&rsquo;ll see plenty of <code>.c</code> code files and <code>.h</code> header files. Those header files define exactly which functions, structs, enums, global variables, and macros you&rsquo;ll be able to use to develop your app.</p>
<p>You&rsquo;ll also see some header files that end with the suffix <code>_i.h</code>. These are <em>internal</em> headers. This means that their content is not made available to app developers. You <em>shouldn&rsquo;t</em> need anything in them, although occasionally you may see something in there you&rsquo;d like to use. Try searching to see if it&rsquo;s called as a part of another function. There&rsquo;s often a good reason why a function has not been exposed to app developers. If you still think you need it, you can always raise the question on Discord.</p>
<h2 id="setting-up-your-environment">Setting up your environment</h2>
<p>First, create the directory you want to work in, open a terminal, and navigate to that directory.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ mkdir test_app
</span></span><span style="display:flex;"><span>$ cd test_app
</span></span></code></pre></div><p>I often open a terminal in Visual Studio Code, as it&rsquo;s easiest to work in a single tool and see what&rsquo;s happening as I go.</p>
<h3 id="fetch-the-flipperzero-firmware">Fetch the FlipperZero firmware</h3>
<p>Update <code>ufbt</code> to collect the Software Development Kit (SDK) for the current firmware. You can specify the firmware channel using the <code>--channel=[dev|rc|release]</code> option.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ufbt update --channel<span style="color:#f92672">=</span>dev
</span></span><span style="display:flex;"><span>13:36:51.062 <span style="color:#f92672">[</span>I<span style="color:#f92672">]</span> Deploying SDK <span style="color:#66d9ef">for</span> f7
</span></span><span style="display:flex;"><span>13:36:51.062 <span style="color:#f92672">[</span>I<span style="color:#f92672">]</span> Fetching version info <span style="color:#66d9ef">for</span> UpdateChannel.DEV from https://update.flipperzero.one/firmware/directory.json
</span></span><span style="display:flex;"><span>13:36:51.201 <span style="color:#f92672">[</span>I<span style="color:#f92672">]</span> Using version: a7d1ec03
</span></span><span style="display:flex;"><span>13:36:51.201 <span style="color:#f92672">[</span>I<span style="color:#f92672">]</span> uFBT SDK dir: /Users/lewiswestbury/.ufbt/current
</span></span><span style="display:flex;"><span>13:36:53.304 <span style="color:#f92672">[</span>I<span style="color:#f92672">]</span> Deploying SDK
</span></span><span style="display:flex;"><span>13:36:53.556 <span style="color:#f92672">[</span>I<span style="color:#f92672">]</span> SDK deployed.
</span></span></code></pre></div><p><em>NB. I recommend working against the <code>dev</code> channel firmware. It enables quite a lot of safeguards to help catch certain kinds of mistakes early (you&rsquo;ll see theses as <code>furi_assert</code> assertions in firmware code, and you can use them yourself).</em></p>
<p><em>NNB. If a <code>furi_assert</code> fails (ie. the assertion isn&rsquo;t true), it will hang your program. It can sometimes be quite difficult to identify or locate the problem, particularly if you haven&rsquo;t tried to debug your code yet, but at least you&rsquo;ll know there&rsquo;s an issue. I&rsquo;ll cover debugging in a future tutorial (once I have the supporting hardware). In the meantime, you could check out <a href="https://www.youtube.com/@MrDerekJamison">Derek Jamison</a>&rsquo;s guide on YouTube: <a href="https://youtu.be/CLsLZO15S44">Flipper Zero: Debugging FURI_ASSERT failures</a></em></p>
<p>Your Flipper&rsquo;s firmware should match the firmware you&rsquo;re working against, or the app won&rsquo;t launch. You can use <code>ufbt</code> to flash the firmware on your Flipper:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ufbt flash_usb
</span></span></code></pre></div><p><code>ufbt</code> will also flash through an ST-link if you have that available:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ufbt flash
</span></span></code></pre></div><p>The <strong>qFlipper</strong> application also supports this:</p>
<p><img alt="the qFlipper app showing the firmware view and the big green update button" src="/f0-tutorial/qflipper-update.png"></p>
<h3 id="create-a-skeleton-app">Create a skeleton app</h3>
<p><code>ufbt create</code> will create a nice working environment for your app. Give your app a simple id, eg. <code>test_app</code> - you&rsquo;ll be able to change this later. Provide an id for the application, with the <code>APPID=</code> option.</p>
<p><em>NB. I recommend using characters from the simple set of <code>a-zA-Z0-9_</code>. Restrict yourself to characters that can appear in a C function name, or you may end up having to rename the main function, and the entrypoint in your application manifest before you can build.</em></p>
<p>Running for the first time, it&rsquo;ll warn that the <code>application.fam</code> file doesn&rsquo;t exist (and then create one for you):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ufbt create APPID<span style="color:#f92672">=</span>test_app
</span></span><span style="display:flex;"><span>scons: Entering directory <span style="color:#e6db74">`</span>/Users/lewiswestbury/.ufbt/current/scripts/ufbt<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">fbt: warning: Folder app: manifest application.fam is missing
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">LoadAppManifest, line 31, in file &#34;/Users/lewiswestbury/.ufbt/current/scripts/fbt_tools/fbt_apps.py&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Creating &#39;</span>/Users/lewiswestbury/src/test_app/test_app.c<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">        INSTALL /Users/lewiswestbury/src/test_app/test_app.png
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Creating &#39;</span>/Users/lewiswestbury/src/test_app/application.fam<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>Mkdir<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/Users/lewiswestbury/src/test_app/images&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>Touch<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;/Users/lewiswestbury/src/test_app/images/.gitkeep&#34;</span><span style="color:#f92672">)</span>
</span></span></code></pre></div><p>You should see the following files in the directory now:</p>
<ul>
<li><code>application.fam</code> - this is the app manifest, with details about your app</li>
<li><code>ufbt-test.c</code> - application source code</li>
<li><code>ufbt-test.png</code> - a 10x10 1-bit png icon for the app</li>
<li><code>images/</code> - a directory where you can place 1-bit png icons</li>
</ul>
<p><img alt="A screenshot of visual studio code showing a terminal with ufbt create, and the application manifest it has created" src="/f0-tutorial/ufbt-create.png"></p>
<h3 id="test-a-build">Test a build</h3>
<p>With no other options, <code>ufbt</code> will build your app.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ufbt 
</span></span><span style="display:flex;"><span>scons: Entering directory <span style="color:#e6db74">`</span>/Users/lewiswestbury/.ufbt/current/scripts/ufbt<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>        ICONS   /Users/lewiswestbury/.ufbt/build/test_app/test_app_icons.c
</span></span><span style="display:flex;"><span>        CDB     /Users/lewiswestbury/src/test_app/.vscode/compile_commands.json
</span></span><span style="display:flex;"><span>        CC      /Users/lewiswestbury/src/test_app/test_app.c
</span></span><span style="display:flex;"><span>        CC      /Users/lewiswestbury/.ufbt/build/test_app/test_app_icons.c
</span></span><span style="display:flex;"><span>        LINK    /Users/lewiswestbury/.ufbt/build/test_app_d.elf
</span></span><span style="display:flex;"><span>        INSTALL /Users/lewiswestbury/src/test_app/dist/debug/test_app_d.elf
</span></span><span style="display:flex;"><span>        APPMETA /Users/lewiswestbury/.ufbt/build/test_app.fap
</span></span><span style="display:flex;"><span>        FAP     /Users/lewiswestbury/.ufbt/build/test_app.fap
</span></span><span style="display:flex;"><span>        INSTALL /Users/lewiswestbury/src/test_app/dist/test_app.fap
</span></span><span style="display:flex;"><span>        APPCHK  /Users/lewiswestbury/.ufbt/build/test_app.fap
</span></span><span style="display:flex;"><span>                Target: 7, API: 23.3
</span></span></code></pre></div><p>When complete you&rsquo;ll find a file called <code>test_app.fap</code> inside the <code>dist</code> directory. This is your entire application, bundled for the Flipper Zero. If you upload this to your Flipper Zero, into the <code>Examples</code> directory of your SD card, it&rsquo;ll appear in the Applications menu. (It doesn&rsquo;t do much, but you can run it from there.)</p>
<p>You can change the directory for the app, by altering the <code>fap_category</code> entry in <code>application.fam</code>.</p>
<h3 id="visual-studio-integration">Visual Studio integration</h3>
<p>Visual Studio Code can support some nice shortcuts to make your life easer, and <code>ufbt</code> can install them.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ufbt vscode_dist
</span></span><span style="display:flex;"><span>scons: Entering directory <span style="color:#e6db74">`</span>/Users/lewiswestbury/.ufbt/current/scripts/ufbt<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Creating &#39;</span>/Users/lewiswestbury/src/test_app/.vscode/c_cpp_properties.json<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Creating &#39;</span>/Users/lewiswestbury/src/test_app/.vscode/extensions.json<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Creating &#39;</span>/Users/lewiswestbury/src/test_app/.vscode/launch.json<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Creating &#39;</span>/Users/lewiswestbury/src/test_app/.vscode/settings.json<span style="color:#e6db74">&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">Creating &#39;</span>/Users/lewiswestbury/src/test_app/.vscode/tasks.json<span style="color:#960050;background-color:#1e0010">&#39;</span>
</span></span><span style="display:flex;"><span>        INSTALL /Users/lewiswestbury/src/test_app/.clang-format
</span></span><span style="display:flex;"><span>        INSTALL /Users/lewiswestbury/src/test_app/.editorconfig
</span></span><span style="display:flex;"><span>        INSTALL /Users/lewiswestbury/src/test_app/.gitignore
</span></span></code></pre></div><p>Visual Studio Code now becomes aware of references to the SDK in your code, which is very helpful for syntax and error highlighting. You can now also use shortcuts in the IDE:</p>
<ul>
<li><code>Shift</code> + <code>Command</code> + <code>B</code> = build menu</li>
<li><code>Shift</code> + <code>Command</code> + <code>D</code> = debugging menu</li>
</ul>
<h2 id="quick-review">Quick review</h2>
<p>We&rsquo;ve looked at Flipper Zero firmware, pitfalls of working in C, setting up your environment, creating a skeleton app, and testing your toolchain with a simple build.</p>
<p>In the next part, we&rsquo;ll explore the various approaches, structures and libraries available to help you build a graphical interface for the Flipper.</p>

        </div>
    </div>
</div>


        </div><script src="/js/bootstrap.min.js"></script>
<script src="/js/feather.min.js"></script>
<script src="/js/mastodon-timeline.umd.js"></script>
<script>
  feather.replace();
</script></body>
</html>