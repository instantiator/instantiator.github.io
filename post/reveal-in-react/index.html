<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/mastodon-timeline.min.css">
    
    
    <title>instantiator.dev | Reveal in React</title>
    
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-SHE42ZWKEN"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-SHE42ZWKEN');
        }
      </script>
    
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://instantiator.dev/reveal/multiplexing-slides-1-and-2.gif">
  <meta name="twitter:title" content="Reveal in React">
  <meta name="twitter:description" content="What if your UI was a slide show?
Reveal in React TLDR: Here’s a template repository for a NextJS app with a Reveal slide show UI: instantiator/reveal-on-next">

    <meta property="og:url" content="https://instantiator.dev/post/reveal-in-react/">
  <meta property="og:site_name" content="instantiator.dev">
  <meta property="og:title" content="Reveal in React">
  <meta property="og:description" content="What if your UI was a slide show?
Reveal in React TLDR: Here’s a template repository for a NextJS app with a Reveal slide show UI: instantiator/reveal-on-next">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="post">
    <meta property="article:published_time" content="2023-09-12T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-09-12T00:00:00+00:00">
    <meta property="article:tag" content="RevealJS">
    <meta property="article:tag" content="Reveal">
    <meta property="article:tag" content="React">
    <meta property="article:tag" content="NextJS">
    <meta property="article:tag" content="Presentation">
    <meta property="article:tag" content="SlideShow">
    <meta property="og:image" content="https://instantiator.dev/reveal/multiplexing-slides-1-and-2.gif">


    
    <link rel="stylesheet"
        href="/css/markupHighlight.min.59c08a266e8a6489aab7cb3ace4259db920d0e8893682a44ef8401387af97664.css"
        integrity="sha256-WcCKJm6KZImqt8s6zkJZ25INDoiTaCpE74QBOHr5dmQ="
        crossorigin="anonymous"
        type="text/css">

    </head><body><nav id="nav" class="navbar sticky-top justify-content-start navbar-expand-md frosted-white shadow mb-4">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">instantiator.dev</a>
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav">
        
        
        <li class="nav-item">
          <a class="nav-link " href="/">
            
             Home
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/post/">
            
             All posts
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/categories/tool/">
            
             Tools
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/categories/tutorial/">
            
             Tutorials
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/categories/article/">
            
             Articles
          </a>
        </li>
        
        <li class="nav-item">
          <a class="nav-link " href="/about/">
            
             About
          </a>
        </li>
        
      </ul>
    </div>
  </div>
</nav>
<div class="container-fluid">

<div class="row align-items-start">
    <div class="col col-lg-3 d-none d-lg-block">
      <div class="row mb-2">
    <div class="col-3 col-lg-12 d-flex flex-column align-items-center">
        <img 
            src="/lewis/profile.jpg" alt="profile picture" 
            class="mb-4 mt-4 img-thumbnail" 
            style="border-radius: 50%; max-width: 200px; width: 100%;" />
    </div>
    <div class="col d-flex flex-column align-items-center">
        <h3 class="mb-4"><a href="/">instantiator.dev</a></h3>
        
        <div style="text-align: center;" class="mb-4">
            <p style="font-size: 0.8rem;">tech, volunteers, public safety, collective intelligence, articles, tools, code and ideas</p>
        </div>

        <div class="d-flex flex-row justify-content-evenly align-self-stretch mb-4">
            
            <a href="https://mastodon.social/@instantiator" rel="me" aria-label="Mastodon account" alt="Mastodon account" target="_blank">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 418 512" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48 0 0 0-63.72 28.5-63.72 125.7 0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54 0 0 1-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"></path></svg> 
                
            </a>
            
            <a href="https://bsky.app/profile/instantiator.bsky.social" rel="me" aria-label="BlueSky account" alt="BlueSky account" target="_blank">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 600 530" fill="currentColor" stroke="currentColor" version="1.1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m135.72 44.03c66.496 49.921 138.02 151.14 164.28 205.46 26.262-54.316 97.782-155.54 164.28-205.46 47.98-36.021 125.72-63.892 125.72 24.795 0 17.712-10.155 148.79-16.111 170.07-20.703 73.984-96.144 92.854-163.25 81.433 117.3 19.964 147.14 86.092 82.697 152.22-122.39 125.59-175.91-31.511-189.63-71.766-2.514-7.3797-3.6904-10.832-3.7077-7.8964-0.0174-2.9357-1.1937 0.51669-3.7077 7.8964-13.714 40.255-67.233 197.36-189.63 71.766-64.444-66.128-34.605-132.26 82.697-152.22-67.108 11.421-142.55-7.4491-163.25-81.433-5.9562-21.282-16.111-152.36-16.111-170.07 0-88.687 77.742-60.816 125.72-24.795z"/>
                </svg>
                
            </a>
            
            <a href="https://github.com/instantiator" rel="me" aria-label="GitHub account" alt="GitHub account" target="_blank">
                
                <i data-feather="github" aria-hidden="true"></i>
                
            </a>
            
            <a href="https://www.linkedin.com/in/lewiswestbury" rel="me" aria-label="LinkedIn account" alt="LinkedIn account" target="_blank">
                
                <i data-feather="linkedin" aria-hidden="true"></i>
                
            </a>
            
            <a href="https://calendar.google.com/calendar/embed?src=ad7606dfb0580dc089629dff9be0d9fc0db19d296a7d72864c1b338f4dd896a4%40group.calendar.google.com&amp;ctz=Europe%2FLondon" rel="me" aria-label="Celebrations calendar" alt="Celebrations calendar" target="_blank">
                
                <i data-feather="calendar" aria-hidden="true"></i>
                
            </a>
            
            <a href="https://instantiator.dev/index.xml" rel="me" aria-label="RSS" alt="RSS" target="_blank">
                
                <i data-feather="rss" aria-hidden="true"></i>
                
            </a>
            
        </div>

        <div class="d-flex flex-row justify-content-evenly align-self-stretch mb-4" style="font-size: 0.8rem;">
            <ul style="padding-inline-start: 0;">
            
                <li><a href="https://instantiator.dev/presence" rel="me" aria-label="Presence" target="_blank">Presence</a> (tool) (in dev)</li>
            
                <li><a href="https://instantiator.dev/listsky/" rel="me" aria-label="ListSky" target="_blank">ListSky</a> (tool) (in dev)</li>
            
                <li><a href="https://epistolorean.club" rel="me" aria-label="The Epistolorean" target="_blank">The Epistolorean</a> (service)</li>
            
                <li><a href="https://icgames.net" rel="me" aria-label="Consensus Games" target="_blank">Consensus Games</a> (service) (in dev)</li>
            
                <li><a href="https://instantiator.dev/json-to-smart-csv/" rel="me" aria-label="JSON to Smart CSV" target="_blank">JSON to Smart CSV</a> (tool)</li>
            
                <li><a href="https://www.escapethereview.co.uk/profile/?user_id=11" rel="me" aria-label="Escape the Review" target="_blank">Escape the Review</a> (profile)</li>
            
                <li><a href="https://calendar.google.com/calendar/embed?src=ad7606dfb0580dc089629dff9be0d9fc0db19d296a7d72864c1b338f4dd896a4%40group.calendar.google.com&amp;ctz=Europe%2FLondon" rel="me" aria-label="In this house..." target="_blank">In this house...</a> (calendar)</li>
            
            </ul>
        </div>

        <div>
            <span class="text-body-secondary fw-lighter" style="font-size: 0.8rem;">
                &copy; Lewis Westbury  2025 
            </span>
        </div>
    </div>
</div>    



    </div>
    <div class="col-lg" style="overflow-x: hidden;">
        <div id="post-content">
            <h2 style="display: inline-block;">Reveal in React</h2>
                
                    
                        
                        <a class="badge bg-primary" href="https://instantiator.dev/categories/tutorial">tutorial</a>
                    
                        
                        <a class="badge bg-primary" href="https://instantiator.dev/categories/tool">tool</a>
                    
                        
                        <a class="badge bg-primary" href="https://instantiator.dev/categories/hack">hack</a>
                    
                        
                        <a class="badge bg-primary" href="https://instantiator.dev/categories/template">template</a>
                    
                
            <div class="mt-2">
                 

<div class="mb-2">
    <i data-feather="calendar"></i>
    <time datetime="2023-09-12">2023-09-12</time>
</div>

<div>
    <i data-feather="tag"></i>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/revealjs">#RevealJS</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/reveal">#reveal</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/react">#React</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/nextjs">#NextJS</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/presentation">#presentation</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/slideshow">#SlideShow</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/javascript">#javascript</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/typescript">#TypeScript</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/template">#template</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/repository">#repository</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/ui">#UI</a>
    
        
        <a class="badge bg-secondary" href="https://instantiator.dev/tags/ux">#UX</a>
    
</div>


            </div>
            <div class="mt-4">
                <p>What if your UI was a slide show?</p>
<h1 id="reveal-in-react">Reveal in React</h1>
<p><strong>TLDR:</strong> Here&rsquo;s a template repository for a NextJS app with a Reveal slide show UI: <a href="https://github.com/instantiator/reveal-on-next">instantiator/reveal-on-next</a></p>
<p><a href="https://nextjs.org/">NextJS</a> from <a href="https://vercel.com/">Vercel</a> is a <a href="https://react.dev/">React</a> framework for creating web applications that can be hosted statically or dynamically - with some clever ways to control if your code should run server-side or client-side. It can statically load pages with content from build time, and then update them dynamically. This is a very important for SEO.</p>
<p>I&rsquo;ve been exploring ways to embed slide shows into React applications, and allowing them to interact with the rest of the web app as React elements or components in their own right.</p>
<p><a href="https://revealjs.com/">RevealJS</a> is described as &ldquo;an HTML presentation framework&rdquo;. It&rsquo;s nice looking, simple to create content for, and very flexible. It embeds into regular vanilla javascript websites easily, and with a little tweaking it can be made compatible with React apps, too.</p>
<h2 id="multiplexing">Multiplexing</h2>
<p>RevealJS has another feature: Multiplexing. This allows one (or more) client slide shows to follow the progress of one (or more) <del>master</del> controller slide show. This capability is available as the <a href="https://github.com/reveal/multiplex">Multiplex plugin</a>. It can be easily enabled, provided you have access to its socket.io server.</p>
<p>You can stand up your own server, or for non-production work there&rsquo;s also one hosted at <a href="https://reveal-multiplex.glitch.me/">reveal-multiplex.glitch.me</a>.</p>
<p>This experiment also explores multiplexing capability.</p>
<h2 id="dynamic-content">Dynamic content</h2>
<p>Another aspect of using a presentation as a UI is the ability for an application to control the content that goes inside it. This experiment explores the use of the <a href="https://swr.vercel.app/">SWR</a> library to fetch content, and then <a href="https://www.npmjs.com/package/html-react-parser">html-react-parser</a> to render that content inside the presentation.</p>
<p>This has an interesting benefit: It&rsquo;s possible to create and insert real React elements inside the presentation - meaning you can create rich user experiences and interactions within the slide show UI.</p>
<h2 id="static-sites">Static sites</h2>
<p>An interesting benefit of working with NextJS is that it can generate a fully static export of your application. This can significantly reduce your hosting costs, provided you don&rsquo;t need server-side features. Some static hosting, eg. <a href="https://pages.github.com/">GitHub Pages</a>, is completely free.</p>
<p>NB. Some NextJS features are at odds with the ability to generate a static export, eg. if you need to regularly update the content of your static preview. These should be avoided to preserve this capability.</p>
<p>Building a static site aligns well with requirements for Reveal, as it needs client-side javascript from the moment it is created.</p>
<p>A goal of this experiment is to build an application that preserves this static export capability.</p>
<h2 id="getting-started">Getting started</h2>
<p>To get a simple web app running, with slide show pages for client and controllers:</p>
<ul>
<li>
<p>Fork the template repository: <a href="https://github.com/instantiator/reveal-on-next">instantiator/reveal-on-next</a></p>
</li>
<li>
<p>Install dependencies and run the dev server:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install
</span></span><span style="display:flex;"><span>npm run dev
</span></span></code></pre></div></li>
</ul>
<p>The site will be served at: <a href="http://localhost:3000">localhost:3000</a></p>
<h2 id="build-your-own">Build your own</h2>
<p>The following notes outline the approach I took to embedding Reveal in a Next/React application&hellip;</p>
<h3 id="install-node-and-npx">Install node and npx</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>brew install node
</span></span><span style="display:flex;"><span>npm install -g npx
</span></span></code></pre></div><h3 id="create-the-app">Create the app</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npx create-next-app@latest
</span></span></code></pre></div><h3 id="install-revealjs">Install <code>reveal.js</code></h3>
<p>There are a few react-reveal packages that wrap Reveal for React/Next applications, but they&rsquo;re a little out of date now (the latest was last updated 3 years ago), and aren&rsquo;t really suited to Next or server-side rendering without some extra work.</p>
<p>Install <code>reveal.js</code> directly:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install reveal.js
</span></span></code></pre></div><h3 id="create-a-presentation-component">Create a presentation component</h3>
<p><strong>See:</strong> <a href="https://github.com/instantiator/reveal-on-next/blob/main/components/Presentation.tsx"><code>components/Presentation.tsx</code></a></p>
<p><code>reveal.js</code> will only run in a browser environment, as it needs access to client specific javascript objects, such as <code>navigator</code>. It also needs to be able to see the <code>div</code> elements with <code>reveal</code> and <code>slides</code> CSS classes, as soon as it is created. This code forces Next to only invoke it in a browser&hellip;</p>
<p>This is an invocation for Next - telling it that the component needs client-side rendering:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#e6db74">&#34;use client&#34;</span>;
</span></span></code></pre></div><p><code>Reveal</code> is only created inside a <code>useEffect</code> - which is called when the page and divs are ready.</p>
<p>The <code>embedded</code> option is set to true - and this helps to incorporate other layout and elements alongside the presentation. As the presentation no longer automatically fills the page, the <code>reveal</code> <code>div</code> will need to have its size specified in CSS&hellip;</p>
<p><em>NB. The configuration also includes multiplex information and dependencies. See below for more information.</em></p>
<p><code>Reveal</code> is only initialised once the content inside the presentation is ready. See below for details of how the content is retrieved and rendered.</p>
<h3 id="modify-globalscss">Modify <code>globals.css</code></h3>
<p><strong>See:</strong> <a href="https://github.com/instantiator/reveal-on-next/blob/main/app/globals.css"><code>app/globals.css</code></a></p>
<p>The global CSS can be simplified and adjusted to help fit the presentation to the page. If you are using another framework, such as <a href="https://mui.com/">MUI</a>, you may need to solve this another way.</p>
<p>In particular:</p>
<ul>
<li>Zero <code>margin</code> and <code>padding</code> on <code>html</code> and <code>body</code>. This removes any whitespace around the edges of the page.</li>
<li>Set <code>body</code> to <code>display: flex</code> (in column direction). This allows us to resize the presentation to fit below any layout above it.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">html</span><span style="color:#f92672">,</span> <span style="color:#f92672">body</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">max-width</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">vw</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">overflow-x</span>: <span style="color:#66d9ef">hidden</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">height</span>: <span style="color:#ae81ff">100</span><span style="color:#66d9ef">%</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">margin</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">padding</span>: <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">body</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">display</span>: <span style="color:#66d9ef">flex</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">flex-direction</span>: <span style="color:#66d9ef">column</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">color</span>: rgb(<span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>foreground<span style="color:#f92672">-</span>rgb));
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="import-the-presentation-component">Import the presentation component</h3>
<p><strong>See:</strong></p>
<ul>
<li><a href="https://github.com/instantiator/reveal-on-next/blob/main/app/slides/controller/page.tsx"><code>app/slides/controller/page.tsx</code></a></li>
<li><a href="https://github.com/instantiator/reveal-on-next/blob/main/app/slides/client/page.tsx"><code>app/slides/client/page.tsx</code></a></li>
</ul>
<p>As shown in both <code>page.tsx</code> files, <code>dynamic</code> can be used to import the <code>Presentation</code> element dynamically, with <code>ssr: false</code> to prevent server-side rendering:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Presentation</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">dynamic</span>(() <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">import</span>(<span style="color:#e6db74">&#39;../../../components/Presentation&#39;</span>), { <span style="color:#a6e22e">ssr</span>: <span style="color:#66d9ef">false</span> });
</span></span></code></pre></div><p>Both of these pages are simple, returning a component that renders the <code>Presentation</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">Controller() {</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>        &lt;<span style="color:#f92672">Presentation</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">role</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;controller&#34;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">secret</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">SECRET</span>} 
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">SOCKET_ID</span>} 
</span></span><span style="display:flex;"><span>            <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/presentation-tsx.html&#34;</span> /&gt;
</span></span><span style="display:flex;"><span>    );
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="remote-content">Remote content</h2>
<p>The <a href="https://github.com/instantiator/reveal-on-next/blob/main/components/presentation.tsx"><code>Presentation</code></a> element has a <code>src</code> parameter, and this is passed to an internal <a href="https://github.com/instantiator/reveal-on-next/blob/main/components/PresentationContent.tsx"><code>PresentationContent</code></a> element which uses the <a href="https://swr.vercel.app/">SWR</a> library to fetch the content. This content is then enriched (React elements are created where needed inside it), and then rendered inside the <code>Presentation</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install swr
</span></span></code></pre></div><h3 id="dynamically-creating-react-elements">Dynamically creating React elements</h3>
<p>Some of the content is regular HTML, but some of the elements are React components. There are a number of packages that might help us convert the HTML and manage React components:</p>
<table>
  <thead>
      <tr>
          <th>Library</th>
          <th>Last updated</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><a href="https://www.npmjs.com/package/html-react-parser">html-react-parser</a></td>
          <td>recently</td>
      </tr>
      <tr>
          <td><a href="https://www.npmjs.com/package/html-to-react">html-to-react</a></td>
          <td>recently</td>
      </tr>
      <tr>
          <td><del><a href="https://www.npmjs.com/package/react-html-parser">react-html-parser</a></del></td>
          <td>6 years ago</td>
      </tr>
  </tbody>
</table>
<p>Install <code>html-react-parser</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install html-react-parser
</span></span></code></pre></div><p><strong>NB.</strong> <code>html-react-parser</code> is simple to use, but not XSS-safe, and should be used with caution. <code>PresentationContent</code> manages replacement of individual React elements by type:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">options</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">replace</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">domNode</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">domNode</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Element</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">domNode</span>.<span style="color:#a6e22e">attribs</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">switch</span> (<span style="color:#a6e22e">domNode</span>.<span style="color:#a6e22e">tagName</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;question&#34;</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>          <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Enriching question tag...&#34;</span>);
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">question</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">domNode</span>.<span style="color:#a6e22e">attribs</span>[<span style="color:#e6db74">&#34;question&#34;</span>];
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">explanation</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">domNode</span>.<span style="color:#a6e22e">attribs</span>[<span style="color:#e6db74">&#34;explanation&#34;</span>];
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">instruction</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">domNode</span>.<span style="color:#a6e22e">attribs</span>[<span style="color:#e6db74">&#34;instruction&#34;</span>];
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">question</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">explanation</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">instruction</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">return</span> (
</span></span><span style="display:flex;"><span>              &lt;<span style="color:#f92672">Question</span>
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">question</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">question</span>}
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">explanation</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">explanation</span>}
</span></span><span style="display:flex;"><span>                <span style="color:#a6e22e">instruction</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">instruction</span>}
</span></span><span style="display:flex;"><span>              /&gt;
</span></span><span style="display:flex;"><span>            );
</span></span><span style="display:flex;"><span>          }
</span></span><span style="display:flex;"><span>          <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>Here, <a href="https://github.com/instantiator/reveal-on-next/blob/main/components/Question.tsx"><code>Question</code></a> also incorporates a <code>Rating</code> element, from: <a href="https://www.npmjs.com/package/react-rating">react-rating</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install react-rating
</span></span></code></pre></div><h2 id="multiplexing-1">Multiplexing</h2>
<p>Multiplexing allows a controller presentation to send its state to client presentations on other devices (ie. to allow them to follow along).</p>
<p>There are 3 components:</p>
<ul>
<li>Any number of client presentations</li>
<li>A controller* presentation, with the same slides</li>
<li>A socket.io based server that passes messages between the various presentations</li>
</ul>
<p><em>*Sometimes referred to as a master presentation.</em></p>
<h3 id="the-server">The server</h3>
<p>This demo uses the server at: <a href="https://reveal-multiplex.glitch.me/">https://reveal-multiplex.glitch.me/</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">SOCKET_IO_SERVER</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://reveal-multiplex.glitch.me/&#34;</span>;
</span></span></code></pre></div><ul>
<li>To test locally, you could also run your own server.</li>
<li>A production system should host its own server.</li>
<li>See: <a href="https://github.com/reveal/multiplex">reveal/multiplex</a></li>
</ul>
<h3 id="client-and-controller">Client and controller</h3>
<p>Install the multiplex plugin:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npm install reveal-multiplex
</span></span></code></pre></div><p>The Presentation component in <a href="https://github.com/instantiator/reveal-on-next/blob/main/components/Presentation.tsx"><code>Presentation.tsx</code></a> accepts several parameters:</p>
<ul>
<li>
<p><code>secret</code> (a secret to permit control, or <code>null</code> if acting as the client)</p>
</li>
<li>
<p><code>id</code> (the id of the presentation)</p>
</li>
<li>
<p><code>role</code> (not currently used)</p>
</li>
<li>
<p>To collect a fresh secret and id from the server, visit: <a href="https://reveal-multiplex.glitch.me/token">https://reveal-multiplex.glitch.me/token</a></p>
</li>
</ul>
<p>The multiplex plugin is configured during initialization of Reveal:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#a6e22e">multiplex</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">secret</span>: <span style="color:#66d9ef">secret</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">id</span>: <span style="color:#66d9ef">id</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">url</span>: <span style="color:#66d9ef">SOCKET_IO_SERVER</span>
</span></span><span style="display:flex;"><span>},
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">dependencies</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">src</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://reveal-multiplex.glitch.me/socket.io/socket.io.js&#39;</span>, <span style="color:#66d9ef">async</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span> },
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">src</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://reveal-multiplex.glitch.me/master.js&#39;</span>, <span style="color:#66d9ef">async</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span> },
</span></span><span style="display:flex;"><span>    { <span style="color:#a6e22e">src</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://reveal-multiplex.glitch.me/client.js&#39;</span>, <span style="color:#66d9ef">async</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span> },
</span></span><span style="display:flex;"><span>]
</span></span></code></pre></div><p>Because these dependencies rely on being able to find <code>Reveal</code> as a global variable, we also add this, just before initialization:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span>window.<span style="color:#a6e22e">Reveal</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">reveal</span>;
</span></span></code></pre></div><h2 id="static-builds">Static builds</h2>
<h3 id="fix-compiler-issues">Fix compiler issues</h3>
<p>Not all imports agree on the version of React to use, and this can lead to difficulties with imported elements (such as the <code>Rating</code> element used in <a href="https://github.com/instantiator/reveal-on-next/blob/main/components/Question.tsx"><code>Question.tsx</code></a>). In <a href="https://github.com/instantiator/reveal-on-next/blob/main/tsconfig.json"><code>tsconfig.json</code></a> add the following to <code>$.compilerOptions.paths</code> to enforce use of the same version:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsonc" data-lang="jsonc"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">&#34;compilerOptions&#34;</span>: {
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&#34;paths&#34;</span>: [
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#e6db74">&#34;react&#34;</span><span style="color:#960050;background-color:#1e0010">:</span> [<span style="color:#e6db74">&#34;./node_modules/@types/react&#34;</span>]
</span></span><span style="display:flex;"><span>        ]
</span></span><span style="display:flex;"><span>    } 
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>In <a href="https://github.com/instantiator/reveal-on-next/blob/main/components/Presentation.tsx"><code>Presentation.tsx</code></a>, <code>window.Reveal</code> is explicitly set to ensure that it is available to the multiplexing scripts imported as dependencies of <code>Reveal</code>.</p>
<p>TypeScript is strict during a production build, and rejects this as it thinks <code>Reveal</code> is already the name of the module. To instruct the compiler to overlook TypeScript errors, precede the line with <code>// @ts-ignore</code>, as here:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-tsx" data-lang="tsx"><span style="display:flex;"><span><span style="color:#75715e">// @ts-ignore
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>window.<span style="color:#a6e22e">Reveal</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">reveal</span>;
</span></span></code></pre></div><h3 id="build-and-export-the-project">Build and export the project</h3>
<p>Modify <a href="https://github.com/instantiator/reveal-on-next/blob/main/next.config.js"><code>next.config.js</code></a> to set <code>output</code> to <code>export</code>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">nextConfig</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">output</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;export&#34;</span> };
</span></span></code></pre></div><p>Build the project:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>npx next build
</span></span></code></pre></div><p>Static output is put into the <code>out</code> directory by default.</p>
<h2 id="hosting-on-github-pages">Hosting on GitHub pages</h2>
<p><a href="https://pages.github.com/">GitHub Pages</a> can serve the static content either from the root directory of a repository, or from the <code>docs/</code> directory. You can place the output from <code>out</code> into another repository, and serve it from there by enabling GitHub Pages.</p>
<p><strong>However,</strong> directories that are prefixed with <code>_</code> (underscore) are ignored by default. To work around this, add an empty file called <code>.nojekyll</code> at the root of the repository (see: <a href="https://github.blog/2009-12-29-bypassing-jekyll-on-github-pages/">this blog post</a> about it).</p>
<h2 id="conclusion">Conclusion</h2>
<p>This is an absolute bare-bones application - but hopefully it illustrates how you can build a presentation as a React component with dynamically fetched content, and how it can contain rich React components within it to interact with the rest of the application.</p>
<p>Feel free to use the template in any way you wish.</p>

            </div>
        </div>

        <div class="post-footer">
            <div class="info">
                

            </div>
        </div>

    </div>
</div>


        </div><script src="/js/bootstrap.min.js"></script>
<script src="/js/feather.min.js"></script>
<script src="/js/mastodon-timeline.umd.js"></script>
<script>
  feather.replace();
</script></body>
</html>